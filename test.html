<!-- <!DOCTYPE html>
<html>
<head>
  <title>Real-time Audio Recording</title>
</head>
<body>
  <button id="startButton">Start Recording</button>
  <button id="stopButton">Stop Recording</button>
  <audio id="audioPlayer" controls></audio>

  <script>
    let mediaRecorder;
    let recordedChunks = [];

    const startRecording = async () => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);

        mediaRecorder.addEventListener('dataavailable', (event) => {
          recordedChunks.push(event.data);
        });

        mediaRecorder.addEventListener('stop', () => {
          const audioBlob = new Blob(recordedChunks, { type: 'audio/webm' });
          const audioUrl = URL.createObjectURL(audioBlob);
          document.getElementById('audioPlayer').src = audioUrl;
        });

        mediaRecorder.start();
      } catch (error) {
        console.error('Error starting recording:', error);
      }
    };

    const stopRecording = () => {
      if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
        recordedChunks = [];
      }
    };

    document.getElementById('startButton').addEventListener('click', startRecording);
    document.getElementById('stopButton').addEventListener('click', stopRecording);
  </script>
</body>
</html> -->





<!DOCTYPE html>
<html>
<head>
  <title>Real-time Audio Recording</title>
</head>
<body>
  <audio id="audioPlayer" controls></audio>
  <button id="stopButton">Stop Recording</button>

  <script>
    let mediaRecorder;
    let recordedChunks = [];

    const startRecording = async () => {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);

        mediaRecorder.addEventListener('dataavailable', (event) => {
          recordedChunks.push(event.data);
        });

        mediaRecorder.addEventListener('stop', () => {
          const audioBlob = new Blob(recordedChunks, { type: 'audio/webm' });
          const audioUrl = URL.createObjectURL(audioBlob);
          document.getElementById('audioPlayer').src = audioUrl;
        });

        mediaRecorder.start();
      } catch (error) {
        console.error('Error starting recording:', error);
      }
    };

    startRecording(); // Automatically start recording when the page loads

    window.addEventListener('beforeunload', () => {
      if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
        recordedChunks = [];
      }
    });

    const stopRecording = () => {
      if (mediaRecorder && mediaRecorder.state !== 'inactive') {
        mediaRecorder.stop();
        recordedChunks = [];
      }
    };
    document.getElementById('stopButton').addEventListener('click', stopRecording);
  </script>
</body>
</html>